<odoo>
    <record id="view_tree_checkout_bp" model="ir.ui.view">
        <field name="name">view.tree.checkout.book.project</field>
        <field name="model">checkout.book.project</field>
        <field name="arch" type="xml">
            <tree string="">
                <field name="name_seq"/>
                <field name="card_id"/>
                <field name="borrow_date"/>
                <field name="state"/>
                <field name="currency_id" invisible="1"/>
                <field name="price"/>
            </tree>
        </field>
    </record>
    <record id="view_form_checkout_bp" model="ir.ui.view">
        <field name="name">view.form.checkout.book.project</field>
        <field name="model">checkout.book.project</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <field name="state" invisible="1"/>
                    <button name="running_state" type="object"
                            string="Confirm"
                            class="oe_highlight"
                            attrs="{'invisible': [('state', '!=', 'draft')]}"/>
                    <button name="done_state" type="object"
                            string="Returned All"
                            class="oe_highlight"
                            attrs="{'invisible': [('state', '!=', 'running')]}"/>
                    <button name="draft_state" type="object"
                            string="Draft"
                            class="oe_highlight"
                            attrs="{'invisible': [('state', '=', 'draft')]}"/>
                    <button name="fined_state" type="object"
                            string="Fined"
                            class="oe_highlight"
                            attrs="{'invisible': [('state', '!=', 'running')]}"/>
                    <field name="stage_id" widget="statusbar"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <label for="name_seq" class="oe_edit_only" />
                        <h1>
                            <field name="name_seq" readonly="1"/>
                        </h1>
                        <h3>
                          <span class="oe_read_only">On </span>
                          <label for="borrow_date" class="oe_edit_only" />
                          <field name="borrow_date" class="oe_inline" readonly="1"
                                 attrs="{'invisible': [('state', '=', 'draft')]}"/>
                        </h3>
                    </div>
                    <group col="2" colspan="4" string="Card Details">
                        <group>
                           <!-- <separator string="Card Details"/>-->
                            <field name="card_id" required="1" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="gt_name" readonly="1"/>
                        </group>
                        <group>
                            <field name="user_id" readonly="1" options="{'no_open': True}"/>
                            <field name="num_document" string="Limit Document"
                                   attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        </group>
                    </group>
                    <group string="Penalty" attrs="{'invisible': [('state', '!=', 'fined')]}">
                        <group>
                            <field name="currency_id"/>
                            <field name="price" attrs="{'required': [('state', '=', 'fined')]}"/>
                            <field name="note"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Book Line">
                            <field name="checkout_book_line_ids"
                                   attrs="{'readonly': [('state', '=', 'done')]}"
                                   options="{'no_open': True}">
                                <tree editable="bottom"
                                      decoration-danger="is_lost == True">
                                    <field name="book_id" options="{'no_open': True}"/>
                                    <field name="category"/>
                                    <field name="meta_book_id" options="{'no_open': True}"/>
                                    <field name="status_document"/>
                                    <field name="is_lost"/>
                                    <field name="state"/>
                                    <field name="state_chk"/>
                                    <button name="%(do_an_tn.action_wizard_modify_descrip_book)d" string="Modify"
                                            type="action"
                                            class="oe_highlight"
                                            style="width:60px; height:25px; font-size:11px"/>
                                    <button name="done_state" type="object"
                                            string="Return"
                                            attrs="{'invisible': [('state', '=', 'available')]}"
                                            class="oe_highlight"
                                            style="width:60px; height:25px; font-size:11px"/>
                                    <button name="lost_state" type="object"
                                            string="Lost"
                                            confirm="Lost Document?"
                                            class="oe_highlight"
                                            attrs="{'invisible': ['|', '|', ('is_lost', '=', True),
                                                                       ('state', '=', 'available'),
                                                                       ('state_chk', '!=', 'fined')]}"
                                            style="width:60px; height:25px; font-size:11px"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Project Line">
                            <field name="checkout_project_line_ids" attrs="{'readonly': [('state', '=', 'done')]}">
                                <tree editable="bottom">
                                    <field name="project_id"/>
                                    <field name="meta_project_id"/>
                                    <field name="status_document"/>
                                    <field name="state"/>
                                    <button name="%(do_an_tn.action_wizard_modify_descrip_project)d" string="Modify"
                                            type="action"
                                            class="oe_highlight"/>
                                    <button name="done_state" type="object"
                                            string="Return"
                                            attrs="{'invisible': [('state', '=', 'available')]}"
                                            class="oe_highlight"/>

                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <!-- mail mixin fields -->
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

</odoo>